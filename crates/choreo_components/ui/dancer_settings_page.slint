import { ListView, MaterialPalette, MaterialText, TextButton, TextField, Vertical } from "@material";
import { Translations } from "translations.slint";

export component DancerSettingsPage inherits Rectangle {
    in property <[string]> dancer_names;
    in property <int> selected_dancer_index;
    in property <[string]> role_names;
    in property <int> selected_role_index;
    in property <string> dancer_name;
    in property <string> dancer_shortcut;
    in property <string> dancer_icon_name;
    in property <bool> can_delete_dancer;
    in property <bool> can_swap_dancers;
    in property <string> title_text: Translations.dancers_title;
    in property <string> swap_title_text: Translations.dancer_swap_section_title;
    in property <string> save_text: Translations.common_ok;
    in property <string> cancel_text: Translations.common_cancel;

    callback select_dancer(int);
    callback add_dancer();
    callback delete_dancer();
    callback select_role(int);
    callback update_dancer_name(string);
    callback update_dancer_shortcut(string);
    callback update_dancer_icon(string);
    callback swap_dancers();
    callback save();
    callback cancel();

    background: MaterialPalette.surface_container_low;

    Vertical {
        spacing: 12px;
        padding: 8px;
        horizontal-stretch: 1;
        vertical-stretch: 1;

        Rectangle {
            background: MaterialPalette.surface;
            border-width: 1px;
            border-color: MaterialPalette.outline_variant;
            border-radius: 8px;
            Vertical {
                spacing: 6px;
                padding: 12px;
                horizontal-stretch: 1;
                vertical-stretch: 1;
                MaterialText { text: title_text; font-size: 18px; }
                ListView {
                    for name in dancer_names: MaterialText { text: name; }
                }
                TextButton { text: "+"; clicked => { add_dancer(); } }
                TextButton { text: "-"; enabled: can_delete_dancer; clicked => { delete_dancer(); } }
            }
        }

        Rectangle {
            background: MaterialPalette.surface;
            border-width: 1px;
            border-color: MaterialPalette.outline_variant;
            border-radius: 8px;
            Vertical {
                spacing: 6px;
                padding: 12px;
                horizontal-stretch: 1;
                vertical-stretch: 1;
                TextField { label: Translations.dancer_name_label; text: dancer_name; edited(v) => { update_dancer_name(v); } }
                TextField { label: Translations.dancer_shortcut_label; text: dancer_shortcut; edited(v) => { update_dancer_shortcut(v); } }
                TextField { label: Translations.dancer_icon_label; text: dancer_icon_name; edited(v) => { update_dancer_icon(v); } }
            }
        }

        Rectangle {
            background: MaterialPalette.surface;
            border-width: 1px;
            border-color: MaterialPalette.outline_variant;
            border-radius: 8px;
            Vertical {
                spacing: 6px;
                padding: 12px;
                horizontal-stretch: 1;
                vertical-stretch: 1;
                MaterialText { text: swap_title_text; }
                TextButton { text: Translations.dancer_swap_button; enabled: can_swap_dancers; clicked => { swap_dancers(); } }
            }
        }

        Rectangle {
            background: MaterialPalette.surface;
            border-width: 1px;
            border-color: MaterialPalette.outline_variant;
            border-radius: 8px;
            Vertical {
                spacing: 6px;
                padding: 12px;
                horizontal-stretch: 1;
                vertical-stretch: 1;
                TextButton { text: cancel_text; clicked => { cancel(); } }
                TextButton { text: save_text; clicked => { save(); } }
            }
        }
    }
}


