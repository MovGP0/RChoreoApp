import { MaterialPalette, MaterialText, MaterialTypography, ScrollView, Switch, TextField, Vertical, Horizontal } from "@material";
import { Translations } from "translations.slint";

export component SettingsPage inherits Rectangle {
    in property <string> title_text: Translations.settings_title;
    in property <string> use_system_theme_text: Translations.settings_use_system_theme_label;
    in property <string> dark_mode_text: Translations.dark_mode_label;
    in property <string> primary_color_text: Translations.settings_primary_color_label;
    in property <string> secondary_color_text: Translations.settings_secondary_color_label;
    in property <string> tertiary_color_text: Translations.settings_tertiary_color_label;
    in property <string> color_hex_label: Translations.settings_color_hex_label;

    in property <bool> use_system_theme;
    in property <bool> is_dark_mode;
    in property <bool> use_primary_color;
    in property <bool> use_secondary_color;
    in property <bool> use_tertiary_color;

    in property <color> primary_color;
    in property <color> secondary_color;
    in property <color> tertiary_color;

    in property <string> primary_color_hex;
    in property <string> secondary_color_hex;
    in property <string> tertiary_color_hex;

    callback update_use_system_theme(bool);
    callback update_is_dark_mode(bool);
    callback update_use_primary_color(bool);
    callback update_use_secondary_color(bool);
    callback update_use_tertiary_color(bool);
    callback update_primary_color_hex(string);
    callback update_secondary_color_hex(string);
    callback update_tertiary_color_hex(string);

    background: MaterialPalette.surface_container_low;

    ScrollView {
        Vertical {
            padding: 24px;
            spacing: 20px;

            MaterialText {
                text: title_text;
                font-size: MaterialTypography.headline_small.font_size;
                font-weight: MaterialTypography.headline_small.font_weight;
            }

            Horizontal {
                spacing: 12px;
                MaterialText {
                    text: use_system_theme_text;
                    font-size: MaterialTypography.body_medium.font_size;
                    font-weight: MaterialTypography.body_medium.font_weight;
                }
                Switch {
                    checked: use_system_theme;
                    checked_state_changed(value) => { update_use_system_theme(value); }
                }
            }

            Horizontal {
                spacing: 12px;
                MaterialText {
                    text: dark_mode_text;
                    font-size: MaterialTypography.body_medium.font_size;
                    font-weight: MaterialTypography.body_medium.font_weight;
                }
                Switch {
                    enabled: !use_system_theme;
                    checked: is_dark_mode;
                    checked_state_changed(value) => { update_is_dark_mode(value); }
                }
            }

            Horizontal {
                spacing: 12px;
                MaterialText {
                    text: primary_color_text;
                    font-size: MaterialTypography.body_medium.font_size;
                    font-weight: MaterialTypography.body_medium.font_weight;
                }
                Switch {
                    checked: use_primary_color;
                    checked_state_changed(value) => { update_use_primary_color(value); }
                }
            }

            Horizontal {
                spacing: 12px;
                Rectangle {
                    width: 32px;
                    height: 32px;
                    border-radius: 6px;
                    background: primary_color;
                }
                TextField {
                    label: color_hex_label;
                    text: primary_color_hex;
                    enabled: use_primary_color;
                    edited(value) => { update_primary_color_hex(value); }
                }
            }

            Horizontal {
                spacing: 12px;
                MaterialText {
                    text: secondary_color_text;
                    font-size: MaterialTypography.body_medium.font_size;
                    font-weight: MaterialTypography.body_medium.font_weight;
                }
                Switch {
                    enabled: use_primary_color;
                    checked: use_secondary_color;
                    checked_state_changed(value) => { update_use_secondary_color(value); }
                }
            }

            Horizontal {
                spacing: 12px;
                Rectangle {
                    width: 32px;
                    height: 32px;
                    border-radius: 6px;
                    background: secondary_color;
                }
                TextField {
                    label: color_hex_label;
                    text: secondary_color_hex;
                    enabled: use_secondary_color;
                    edited(value) => { update_secondary_color_hex(value); }
                }
            }

            Horizontal {
                spacing: 12px;
                MaterialText {
                    text: tertiary_color_text;
                    font-size: MaterialTypography.body_medium.font_size;
                    font-weight: MaterialTypography.body_medium.font_weight;
                }
                Switch {
                    enabled: use_secondary_color;
                    checked: use_tertiary_color;
                    checked_state_changed(value) => { update_use_tertiary_color(value); }
                }
            }

            Horizontal {
                spacing: 12px;
                Rectangle {
                    width: 32px;
                    height: 32px;
                    border-radius: 6px;
                    background: tertiary_color;
                }
                TextField {
                    label: color_hex_label;
                    text: tertiary_color_hex;
                    enabled: use_tertiary_color;
                    edited(value) => { update_tertiary_color_hex(value); }
                }
            }
        }
    }
}
