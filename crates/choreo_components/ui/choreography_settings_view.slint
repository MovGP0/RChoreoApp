import { MaterialPalette, MenuItem, Vertical } from "@material";
import { Date } from "std-widgets.slint";
import { ChoreographySettingsChoreographyCard } from "choreography_settings_choreography_card.slint";
import { ChoreographySettingsDisplayCard } from "choreography_settings_display_card.slint";
import { ChoreographySettingsFloorCard } from "choreography_settings_floor_card.slint";
import { ChoreographySettingsSceneCard } from "choreography_settings_scene_card.slint";
import { Translations } from "translations.slint";

export component ChoreographySettingsView inherits Rectangle {
    property <[int]> today: SlintInternal.date_now();
    in property <bool> has_selected_scene;
    in property <string> scene_name;
    in property <string> scene_text;
    in property <bool> scene_fixed_positions;
    in property <bool> scene_has_timestamp;
    in property <int> scene_timestamp_minutes;
    in property <int> scene_timestamp_seconds;
    in property <int> scene_timestamp_millis;
    in-out property <color> scene_color;

    in property <string> comment;
    in property <string> name;
    in property <string> subtitle;
    in-out property <Date> date: { day: root.today[0], month: root.today[1], year: root.today[2] };
    in property <string> date_label: Translations.choreography_date_label;
    in property <string> date_picker_title: Translations.choreography_date_picker_title;
    in property <string> variation;
    in property <string> author;
    in property <string> description;

    in property <bool> positions_at_side;
    in property <bool> draw_path_from;
    in property <bool> draw_path_to;
    in property <bool> grid_lines;
    in property <bool> snap_to_grid;
    in property <bool> show_timestamps;
    in property <bool> show_legend;
    in property <float> transparency;
    in-out property <color> floor_color;

    in property <[int]> floor_size_options;
    in property <int> floor_front;
    in property <int> floor_back;
    in property <int> floor_left;
    in property <int> floor_right;

    in property <[MenuItem]> grid_size_options;
    in property <int> grid_resolution_index;

    callback update_scene_name(string);
    callback update_scene_text(string);
    callback update_scene_fixed_positions(bool);
    callback update_scene_has_timestamp(bool);
    callback update_scene_timestamp_parts(int, int, int);
    callback update_scene_color(color);

    callback update_comment(string);
    callback update_name(string);
    callback update_subtitle(string);
    callback update_date_parts(int, int, int);
    callback update_variation(string);
    callback update_author(string);
    callback update_description(string);

    callback update_positions_at_side(bool);
    callback update_draw_path_from(bool);
    callback update_draw_path_to(bool);
    callback update_grid_lines(bool);
    callback update_snap_to_grid(bool);
    callback update_show_timestamps(bool);
    callback update_show_legend(bool);
    callback update_transparency(float);
    callback update_floor_color(color);

    callback update_floor_front(int);
    callback update_floor_back(int);
    callback update_floor_left(int);
    callback update_floor_right(int);
    callback update_grid_resolution(int);

    background: MaterialPalette.surface_variant;
    preferred-height: content.preferred-height;
    height: self.preferred-height;

    content := Vertical {
        width: parent.width;
        height: parent.height;
        padding: 8px;
        spacing: 12px;

        ChoreographySettingsSceneCard {
            has_selected_scene: root.has_selected_scene;
            scene_name: root.scene_name;
            scene_text: root.scene_text;
            scene_fixed_positions: root.scene_fixed_positions;
            scene_has_timestamp: root.scene_has_timestamp;
            scene_timestamp_minutes: root.scene_timestamp_minutes;
            scene_timestamp_seconds: root.scene_timestamp_seconds;
            scene_timestamp_millis: root.scene_timestamp_millis;
            scene_color <=> root.scene_color;

            update_scene_name(value) => { root.update_scene_name(value); }
            update_scene_text(value) => { root.update_scene_text(value); }
            update_scene_fixed_positions(value) => { root.update_scene_fixed_positions(value); }
            update_scene_has_timestamp(value) => { root.update_scene_has_timestamp(value); }
            update_scene_timestamp_parts(minutes, seconds, millis) => {
                root.update_scene_timestamp_parts(minutes, seconds, millis);
            }
            update_scene_color(color) => { root.update_scene_color(color); }
        }

        ChoreographySettingsDisplayCard {
            draw_path_from: root.draw_path_from;
            draw_path_to: root.draw_path_to;
            show_timestamps: root.show_timestamps;
            positions_at_side: root.positions_at_side;
            show_legend: root.show_legend;

            update_draw_path_from(value) => { root.update_draw_path_from(value); }
            update_draw_path_to(value) => { root.update_draw_path_to(value); }
            update_show_timestamps(value) => { root.update_show_timestamps(value); }
            update_positions_at_side(value) => { root.update_positions_at_side(value); }
            update_show_legend(value) => { root.update_show_legend(value); }
        }

        ChoreographySettingsChoreographyCard {
            comment: root.comment;
            name: root.name;
            subtitle: root.subtitle;
            date <=> root.date;
            date_label: root.date_label;
            date_picker_title: root.date_picker_title;
            variation: root.variation;
            author: root.author;
            description: root.description;

            update_comment(value) => { root.update_comment(value); }
            update_name(value) => { root.update_name(value); }
            update_subtitle(value) => { root.update_subtitle(value); }
            update_date_parts(year, month, day) => {
                root.update_date_parts(year, month, day);
            }
            update_variation(value) => { root.update_variation(value); }
            update_author(value) => { root.update_author(value); }
            update_description(value) => { root.update_description(value); }
        }

        ChoreographySettingsFloorCard {
            grid_lines: root.grid_lines;
            snap_to_grid: root.snap_to_grid;
            transparency: root.transparency;
            floor_color <=> root.floor_color;
            floor_size_options: root.floor_size_options;
            floor_front: root.floor_front;
            floor_back: root.floor_back;
            floor_left: root.floor_left;
            floor_right: root.floor_right;
            grid_size_options: root.grid_size_options;
            grid_resolution_index: root.grid_resolution_index;

            update_grid_lines(value) => { root.update_grid_lines(value); }
            update_snap_to_grid(value) => { root.update_snap_to_grid(value); }
            update_transparency(value) => { root.update_transparency(value); }
            update_floor_color(color) => { root.update_floor_color(color); }
            update_floor_front(value) => { root.update_floor_front(value); }
            update_floor_back(value) => { root.update_floor_back(value); }
            update_floor_left(value) => { root.update_floor_left(value); }
            update_floor_right(value) => { root.update_floor_right(value); }
            update_grid_resolution(value) => { root.update_grid_resolution(value); }
        }
    }
}
